<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTS Data Mining - Sistem Ujian Online</title>
    
    <!-- MathJax untuk render persamaan matematika -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .start-screen, .question-screen, .result-screen {
            padding: 40px;
            display: none;
        }

        .start-screen.active, .question-screen.active, .result-screen.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .info-box ul {
            list-style: none;
            padding-left: 20px;
        }

        .info-box li {
            margin: 8px 0;
            position: relative;
        }

        .info-box li:before {
            content: "✓";
            position: absolute;
            left: -20px;
            color: #667eea;
            font-weight: bold;
        }

        /* Settings Box */
        .settings-box {
            background: #e8f0fe;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .settings-box h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .setting-item {
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(30px);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-danger {
            background: #dc3545;
        }

        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .question-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #6c757d;
        }

        .question-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .timer {
            font-size: 1.1em;
            font-weight: bold;
            color: #dc3545;
        }

        .timer.warning {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .question-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #333;
        }

        /* Style untuk persamaan matematika */
        .math-equation {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-size: 1.1em;
            border: 1px solid #e9ecef;
        }

        .inline-math {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .options {
            list-style: none;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .option.selected {
            background: #667eea !important;
            color: white !important;
            border-color: #667eea !important;
            transform: scale(1.02);
        }

        .option.selected .option-label {
            color: white !important;
        }

        .option.correct {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .option-label {
            font-weight: bold;
            margin-right: 10px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        /* Question Navigator */
        .question-navigator {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            display: none;
        }

        .question-navigator.show {
            display: block;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .nav-item {
            width: 40px;
            height: 40px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .nav-item:hover {
            background: #e9ecef;
        }

        .nav-item.answered {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .nav-item.current {
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.3);
        }

        .nav-item.flagged {
            background: #ffc107;
            color: #333;
            border-color: #ffc107;
        }

        /* Flag Button */
        .flag-button {
            background: #ffc107;
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .flag-button:hover {
            background: #ffb300;
        }

        .flag-button.flagged {
            background: #ff6b6b;
            color: white;
        }

        .result-summary {
            text-align: center;
            margin-bottom: 40px;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            position: relative;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .score-text {
            color: white;
            font-size: 3em;
            font-weight: bold;
        }

        .grade {
            font-size: 2em;
            font-weight: bold;
            margin: 20px 0;
        }

        .grade.excellent { color: #28a745; }
        .grade.good { color: #17a2b8; }
        .grade.fair { color: #ffc107; }
        .grade.poor { color: #dc3545; }

        .answer-review {
            margin-top: 40px;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #e9ecef;
        }

        .review-item.correct {
            border-left-color: #28a745;
        }

        .review-item.incorrect {
            border-left-color: #dc3545;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .review-status {
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .review-status.correct {
            background: #d4edda;
            color: #155724;
        }

        .review-status.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .review-question {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .review-answer {
            margin: 5px 0;
            padding-left: 20px;
        }

        .your-answer {
            color: #dc3545;
        }

        .correct-answer {
            color: #28a745;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #6c757d;
            margin-top: 5px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

                .modal-body {
            margin-bottom: 20px;
            color: #666;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Performance Chart */
        .performance-chart {
            margin: 30px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .chart-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .chart-label {
            width: 150px;
            font-weight: bold;
            color: #666;
        }

        .chart-progress {
            flex: 1;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin: 0 10px;
        }

        .chart-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .container {
                margin: 10px;
            }
            
            .start-screen, .question-screen, .result-screen {
                padding: 20px;
            }
            
            .score-circle {
                width: 150px;
                height: 150px;
            }
            
            .score-text {
                font-size: 2em;
            }

            .nav-grid {
                grid-template-columns: repeat(5, 1fr);
            }

            .nav-item {
                width: 35px;
                height: 35px;
                font-size: 0.9em;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        /* Dark Mode */
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        body.dark-mode .container {
            background: #0f3460;
            color: #e8e8e8;
        }

        body.dark-mode .header {
            background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
        }

        body.dark-mode .info-box,
        body.dark-mode .settings-box,
        body.dark-mode .option,
        body.dark-mode .review-item,
        body.dark-mode .stat-card,
        body.dark-mode .question-navigator,
        body.dark-mode .performance-chart {
            background: #16213e;
            border-color: #e94560;
        }

        body.dark-mode .option.selected {
            background: #e94560 !important;
            color: white !important;
            border-color: #e94560 !important;
        }

        body.dark-mode .question-text,
        body.dark-mode .review-question {
            color: #e8e8e8;
        }

        body.dark-mode .modal-content {
            background: #16213e;
            color: #e8e8e8;
        }

        body.dark-mode .modal-header {
            color: #e8e8e8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 UTS Data Mining</h1>
            <p>Sistem Ujian Online - 93 soal Pilihan Ganda</p>
        </div>

        <!-- Start Screen -->
        <div class="start-screen active">
            <div class="info-box">
                <h3>📋 Informasi Ujian</h3>
                <ul>
                    <li>Jumlah Soal: 93 soal pilihan ganda</li>
                    <li>Waktu: 90 menit</li>
                    <li>Passing Grade: 60%</li>
                    <li>Setiap soal bernilai sama</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>📚 Materi yang Diujikan</h3>
                <ul>
                    <li>Konsep Data Mining & KDD</li>
                    <li>Decision Tree & Classification</li>
                    <li>Naive Bayes Classifier</li>
                    <li>Support Vector Machine (SVM)</li>
                    <li>Similarity & Dissimilarity Measures</li>
                </ul>
            </div>

            <div class="settings-box">
                <h3>⚙️ Pengaturan Ujian</h3>
                <div class="setting-item">
                    <label>Acak Soal</label>
                    <div class="toggle-switch" id="randomizeToggle" onclick="toggleSetting('randomize')">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Acak Pilihan Jawaban</label>
                    <div class="toggle-switch" id="randomizeOptionsToggle" onclick="toggleSetting('randomizeOptions')">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Mode Gelap</label>
                    <div class="toggle-switch" id="darkModeToggle" onclick="toggleSetting('darkMode')">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="setting-item">
                    <label>Tampilkan Navigator Soal</label>
                    <div class="toggle-switch active" id="showNavigatorToggle" onclick="toggleSetting('showNavigator')">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <div class="info-box">
                <h3>⚠️ Peraturan Ujian</h3>
                <ul>
                    <li>Jawab semua soal sebelum waktu habis</li>
                    <li>Anda dapat mengubah jawaban sebelum submit</li>
                    <li>Gunakan tombol flag untuk menandai soal yang ragu</li>
                    <li>Navigator soal membantu melacak progress</li>
                    <li>Hasil akan ditampilkan setelah ujian selesai</li>
                </ul>
            </div>

            <div style="text-align: center;">
                <button class="btn" onclick="startExam()">Mulai Ujian</button>
            </div>
        </div>

        <!-- Question Screen -->
        <div class="question-screen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>

            <div class="question-info">
                <div class="question-number" id="questionNumber">Soal 1 dari 60</div>
                <div class="timer" id="timer">90:00</div>
            </div>

            <div class="question-navigator" id="questionNavigator">
                <h4>Navigator Soal</h4>
                <div class="nav-grid" id="navGrid"></div>
            </div>

            <div class="question-text" id="questionText"></div>

            <ul class="options" id="optionsList"></ul>

            <div class="navigation">
                <button class="flag-button" onclick="toggleFlag()" id="flagBtn">
                    🚩 Tandai Soal
                </button>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn">← Sebelumnya</button>
                    <button class="btn" onclick="nextQuestion()" id="nextBtn">Selanjutnya →</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-warning" onclick="showSubmitConfirmation()">Submit Ujian</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div class="result-screen">
            <div class="result-summary">
                <h2>🎉 Ujian Selesai!</h2>
                <div class="score-circle">
                    <div class="score-text" id="scoreText">0%</div>
                </div>
                <div class="grade" id="gradeText"></div>
                <p id="gradeMessage"></p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">Benar</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="incorrectCount">0</div>
                    <div class="stat-label">Salah</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="unansweredCount">0</div>
                    <div class="stat-label">Tidak Dijawab</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="timeSpent">0:00</div>
                    <div class="stat-label">Waktu</div>
                </div>
            </div>

            <div class="performance-chart">
                <h3>📊 Analisis Performa per Topik</h3>
                <div id="topicPerformance"></div>
            </div>

            <div class="answer-review" id="answerReview">
                <h3>📝 Review Jawaban</h3>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="retakeExam()">Ulangi Ujian</button>
                <button class="btn btn-secondary" onclick="downloadResult()">Download Hasil</button>
                <button class="btn btn-secondary" onclick="printResult()">Cetak Hasil</button>
            </div>
        </div>
    </div>

    <!-- Submit Confirmation Modal -->
    <div class="modal" id="submitModal">
        <div class="modal-content">
            <div class="modal-header">Konfirmasi Submit</div>
            <div class="modal-body">
                <p>Apakah Anda yakin ingin mengakhiri ujian?</p>
                <p id="unansweredWarning"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Batal</button>
                <button class="btn btn-danger" onclick="finishExam()">Submit</button>
            </div>
        </div>
    </div>

    <script>
        // Configure MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };

        // Settings
        const settings = {
            randomize: false,
            randomizeOptions: false,
            darkMode: false,
            showNavigator: true
        };

        // Original questions array
        const originalQuestions = [
            {
                question: "Menurut Han dan Kamber (2006), data mining merupakan proses:",
                options: [
                    "Pengumpulan data dari berbagai sumber",
                    "Pemilihan atau 'menambang' pengetahuan dari jumlah data yang banyak",
                    "Penyimpanan data dalam data warehouse",
                    "Visualisasi data untuk presentasi"
                ],
                correct: 1,
                topic: "Konsep Data Mining"
            },
            {
                question: "Tahapan dalam proses KDD (Knowledge Discovery in Databases) yang benar secara berurutan adalah:",
                options: [
                    "Data Mining, Data Preparation, Business Objective Determination, Analysis of Results, Assimilation of Knowledge",
                    "Business Objective Determination, Data Preparation, Data Mining, Analysis of Results, Assimilation of Knowledge",
                    "Data Preparation, Data Mining, Business Objective Determination, Assimilation of Knowledge, Analysis of Results",
                    "Business Objective Determination, Data Mining, Data Preparation, Analysis of Results, Assimilation of Knowledge"
                ],
                correct: 1,
                topic: "KDD Process"
            },
            {
                question: "Komponen dalam Arsitektur Sistem Data Mining yang berfungsi sebagai alat bantu yang digunakan oleh end user adalah:",
                options: [
                    "Data Mining Engine",
                    "Knowledge-base",
                    "Pattern Evaluation",
                    "Graphical User Interface (GUI)"
                ],
                correct: 3,
                topic: "Arsitektur Data Mining"
            },
            {
                question: "Model Data Mining yang bertujuan untuk menjelaskan karakteristik data yang ada, seperti pengelompokan data, disebut model:",
                options: [
                    "Prediktif",
                    "Preskriptif",
                    "Deskriptif",
                    "Diagnostik"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                question: "Berikut ini yang termasuk dalam model Data Mining Prediktif adalah:",
                options: [
                    "Clustering dan Association Rule",
                    "Classification dan Regression",
                    "Summarization dan Sequence Discovery",
                    "Clustering dan Summarization"
                ],
                correct: 1,
                topic: "Model Data Mining"
            },
            {
                question: "Proses penempatan objek-objek ke salah satu dari beberapa kategori yang telah ditetapkan sebelumnya dalam Data Mining disebut:",
                options: [
                    "Clustering",
                    "Regression",
                    "Association Rule",
                    "Classification"
                ],
                correct: 3,
                topic: "Classification"
            },
            {
                question: "Dalam pembangunan model klasifikasi, dataset yang digunakan untuk membangun atau melatih model disebut:",
                options: [
                    "Test Set",
                    "Validation Set",
                    "Training Set",
                    "Unlabeled Set"
                ],
                correct: 2,
                topic: "Classification"
            },
            {
                question: "Node dalam Decision Tree yang tidak memiliki edge yang masuk dan memiliki nol atau banyak edge yang keluar disebut:",
                options: [
                    "Leaf Node",
                    "Internal Node",
                    "Root Node",
                    "Parent Node"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Model klasifikasi yang mengklasifikasikan record dengan menggunakan koleksi aturan 'if ... then ...' adalah:",
                options: [
                    "Decision Tree",
                    "Naive Bayes Classifier",
                    "Support Vector Machine",
                    "Rule-Based Classifier"
                ],
                correct: 3,
                topic: "Classification"
            },
            {
                question: "Asumsi utama yang mendasari Naive Bayes Classifier adalah:",
                options: [
                    "Semua atribut memiliki distribusi normal",
                    "Atribut-atribut bersifat dependen secara kondisional",
                    "Setiap variabel (atribut) bersifat bebas (conditionally independent)",
                    "Data tidak mengandung outlier"
                ],
                correct: 2,
                topic: "Naive Bayes"
            },
            {
                question: "Rumus $$P(X|C_i) = \\prod_{k=1}^{n} P(x_k|C_i)$$ digunakan dalam model klasifikasi:",
                options: [
                    "Support Vector Machine",
                    "Decision Tree",
                    "Naive Bayes Classifier",
                    "K-Nearest Neighbors"
                ],
                correct: 2,
                hasEquation: true,
                topic: "Naive Bayes"
            },
            {
                question: "Metode klasifikasi yang bekerja atas prinsip Structural Risk Minimization (SRM) dengan tujuan menemukan hyperplane terbaik yang memisahkan dua buah kelas adalah:",
                options: [
                    "Naive Bayes Classifier",
                    "Decision Tree",
                    "Support Vector Machine (SVM)",
                    "Rule-Based Classifier"
                ],
                correct: 2,
                topic: "SVM"
            },
            {
                question: "Dalam SVM, objek data terluar yang paling dekat dengan hyperplane dan berperan penting dalam menentukan hyperplane optimal disebut:",
                options: [
                    "Margin Vector",
                    "Boundary Vector",
                    "Support Vector",
                    "Optimal Vector"
                ],
                correct: 2,
                topic: "SVM"
            },
            {
                question: "Metode Decision Tree termasuk ke dalam jenis pembelajaran mesin:",
                options: [
                    "Unsupervised Learning",
                    "Reinforcement Learning",
                    "Supervised Learning",
                    "Semi-supervised Learning"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Berikut ini adalah salah satu kelebihan dari Decision Tree, kecuali:",
                options: [
                    "Mudah diinterpretasikan",
                    "Dapat menangani data numerik dan kategorikal",
                    "Sangat tahan terhadap overfitting tanpa perlu pruning",
                    "Dapat menemukan kombinasi data yang tidak terduga"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Ukuran yang digunakan untuk mengukur kesamaan (homogeneity) atau ketidaksamaan (heterogeneity) data dalam sebuah node pada Decision Tree disebut:",
                options: [
                    "Information Gain",
                    "Purity Score",
                    "Impurity",
                    "Split Value"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Rumus $$Gini = 1 - \\sum p_j^2$$ digunakan untuk menghitung impurity dengan metode:",
                options: [
                    "Entropy",
                    "Gini Index",
                    "Classification Error",
                    "Misclassification Rate"
                ],
                correct: 1,
                hasEquation: true,
                topic: "Decision Tree"
            },
            {
                question: "Jika probabilitas kelas 'Bad' adalah 0.375 dan kelas 'Good' adalah 0.625, maka nilai Gini Index adalah:",
                options: [
                    "0.29",
                    "0.47",
                    "0.375",
                    "0.625"
                ],
                correct: 1,
                topic: "Decision Tree"
            },
            {
                question: "Ukuran yang digunakan untuk menentukan seberapa baik sebuah atribut dapat memisahkan data ke dalam kelas-kelas yang lebih murni disebut:",
                options: [
                    "Split Ratio",
                    "Information Gain",
                    "Node Purity",
                    "Attribute Weight"
                ],
                correct: 1,
                topic: "Decision Tree"
            },
            {
                question: "Pengukuran numerik tentang seberapa mirip 2 data objek, yang umumnya memiliki range [0,1], disebut:",
                options: [
                    "Dissimilarity",
                    "Distance",
                    "Correlation",
                    "Similarity"
                ],
                correct: 3,
                topic: "Similarity Measures"
            },
            {
                question: "Semakin kecil jarak antara dua objek, maka kesamaannya akan:",
                options: [
                    "Semakin kecil",
                    "Semakin besar",
                    "Tidak berubah",
                    "Tidak dapat ditentukan"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Rumus $$d(x,y) = \\sqrt{\\sum_{k=1}^{n} (x_k - y_k)^2}$$ adalah rumus untuk:",
                options: [
                    "Manhattan Distance",
                    "Minkowski Distance dengan r=1",
                    "Euclidean Distance",
                    "Hamming Distance"
                ],
                correct: 2,
                hasEquation: true,
                topic: "Similarity Measures"
            },
            {
                question: "Minkowski Distance menjadi identik dengan Manhattan Distance ketika parameter r bernilai:",
                options: [
                    "0",
                    "1",
                    "2",
                    "∞"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Metode pengukuran jarak yang umumnya digunakan untuk data String atau biner dengan menghitung jumlah posisi di mana simbol berbeda adalah:",
                options: [
                    "Euclidean Distance",
                    "Cosine Similarity",
                    "Jaccard Coefficient",
                    "Hamming Distance"
                ],
                correct: 3,
                topic: "Similarity Measures"
            },
            {
                question: "Algoritma yang sering digunakan dalam text mining untuk mengklasifikasikan dokumen berdasarkan kesamaan sudut antar vektor adalah:",
                options: [
                    "Euclidean Distance",
                    "Simple Matching Coefficient",
                    "Cosine Similarity",
                    "Hamming Distance"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Diberikan dua objek biner A=(1,1,0,1) dan B=(1,0,0,1). Jumlah atribut di mana kedua objek sama-sama bernilai 1 (M11) adalah:",
                options: [
                    "1",
                    "2",
                    "3",
                    "4"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Simple Matching Coefficient (SMC) memperhitungkan:",
                options: [
                    "Hanya kecocokan di mana kedua atribut bernilai 1",
                    "Hanya ketidakcocokan",
                    "Kecocokan di mana kedua atribut bernilai 1 dan kedua atribut bernilai 0",
                    "Hanya kecocokan di mana atribut pertama bernilai 1 dan kedua bernilai 0"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Jaccard Coefficient berbeda dengan SMC karena Jaccard Coefficient:",
                options: [
                    "Memperhitungkan kecocokan M00 (kedua atribut bernilai 0)",
                    "Tidak memperhitungkan kecocokan M00 (kedua atribut bernilai 0)",
                    "Hanya untuk data numerik",
                    "Memiliki range nilai [-1,1]"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Tahap dalam proses KDD yang melibatkan penggunaan algoritma untuk mengekstrak pola dari data yang telah diproses adalah:",
                options: [
                    "Data Selection",
                    "Data Transformation",
                    "Data Mining",
                    "Pattern Evaluation"
                ],
                correct: 2,
                topic: "KDD Process"
            },
            {
                question: "Dalam Decision Tree, node yang merepresentasikan keputusan akhir atau kelas dari data disebut:",
                options: [
                    "Root Node",
                    "Decision Node",
                    "Branch Node",
                    "Leaf Node / Terminal Node"
                ],
                correct: 3,
                topic: "Decision Tree"
            },
            {
                question: "Jika sebuah node pada Decision Tree memiliki Gini Index = 0, maka node tersebut:",
                options: [
                    "Sangat heterogen",
                    "Memiliki campuran kelas yang seimbang",
                    "Murni (semua data dalam node tersebut termasuk dalam satu kelas)",
                    "Perlu di-split lebih lanjut"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Kekurangan utama dari Naive Bayes Classifier adalah:",
                options: [
                    "Komputasinya sangat lambat",
                    "Sulit diinterpretasikan",
                    "Asumsi independensi antar atribut yang seringkali tidak valid di dunia nyata",
                    "Hanya bisa digunakan untuk data numerik"
                ],
                correct: 2,
                topic: "Naive Bayes"
            },
            {
                question: "Tujuan dari Support Vector Machine (SVM) adalah untuk menemukan:",
                options: [
                    "Pusat dari setiap cluster",
                    "Aturan asosiasi dengan confidence tertinggi",
                    "Hyperplane dengan margin maksimal antar kelas",
                    "Pohon keputusan dengan kedalaman minimal"
                ],
                correct: 2,
                topic: "SVM"
            },
            {
                question: "Jika nilai Similarity antara dua dokumen adalah 0.95, ini mengindikasikan bahwa kedua dokumen tersebut:",
                options: [
                    "Sangat berbeda",
                    "Cukup berbeda",
                    "Cukup mirip",
                    "Sangat mirip"
                ],
                correct: 3,
                topic: "Similarity Measures"
            },
            {
                question: "Tahap dalam proses KDD yang bertujuan untuk meyakinkan kualitas dari data yang telah dipilih pada tahapan sebelumnya, termasuk menangani noisy data dan missing values, adalah:",
                options: [
                    "Data Selection",
                    "Data Transformation",
                    "Data Preprocessing",
                    "Data Mining"
                ],
                correct: 2,
                topic: "KDD Process"
            },
            {
                                question: "Komponen dalam Arsitektur Sistem Data Mining yang merupakan kegiatan untuk menemukan pola data yang bernilai melalui knowledge base adalah:",
                options: [
                    "Graphical User Interface (GUI)",
                    "Data Mining Engine",
                    "Pattern Evaluation",
                    "Database/Data Warehouse Server"
                ],
                correct: 2,
                topic: "Arsitektur Data Mining"
            },
            {
                question: "Model Data Mining Time Series Analysis berhubungan dengan:",
                options: [
                    "Pengelompokan objek berdasarkan kemiripan",
                    "Memprediksi nilai berkelanjutan",
                    "Nilai-nilai suatu variabel yang diatur secara periodik sepanjang periode waktu",
                    "Menemukan aturan sebab-akibat antar item"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                question: "Teknik yang berusaha menirukan bagaimana otak bekerja, dengan syaraf-syaraf yang mengirimkan informasi satu sama lain, adalah model Data Mining:",
                options: [
                    "Decision Tree",
                    "Regression",
                    "Neural Network",
                    "Association Rule"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                question: "Proses untuk melakukan segmentasi atau pengelompokan secara alami terhadap atribut suatu set data, termasuk ke dalam unsupervised task, adalah:",
                options: [
                    "Classification",
                    "Summarization",
                    "Clustering",
                    "Sequence Discovery"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                question: "Model Data Mining yang digunakan untuk meneliti berbagai macam kegiatan data mining yang diteliti berdasarkan urutan kejadian untuk mengidentifikasi keterkaitannya dengan waktu adalah:",
                options: [
                    "Association Rule",
                    "Summarization",
                    "Sequence Discovery",
                    "Forecasting"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                question: "Kunci utama algoritma pembelajaran dalam klasifikasi adalah membangun model dengan kemampuan generalisasi yang baik, artinya:",
                options: [
                    "Model sangat kompleks dan memiliki banyak aturan",
                    "Model hanya akurat pada data training",
                    "Model secara akurat memprediksi label kelas dari record yang tidak diketahui sebelumnya",
                    "Model dapat menjelaskan semua variasi dalam data training"
                ],
                correct: 2,
                topic: "Classification"
            },
            {
                question: "Dalam Rule-Based Classifier, bagian 'IF' dari aturan 'IF (Kondisi) THEN y' disebut:",
                options: [
                    "Rule Consequent",
                    "Class Label",
                    "Rule Antecedent",
                    "Prediction"
                ],
                correct: 2,
                topic: "Classification"
            },
            {
                question: "Dalam perhitungan $$P(X|C_i) \\times P(C_i)$$ pada Naive Bayes, $$P(C_i)$$ merepresentasikan:",
                options: [
                    "Probabilitas kemunculan data X",
                    "Probabilitas kondisional atribut xk diberikan kelas Ci",
                    "Probabilitas prior dari kelas Ci",
                    "Probabilitas posterior dari kelas Ci"
                ],
                correct: 2,
                hasEquation: true,
                topic: "Naive Bayes"
            },
            {
                question: "Teknik soft margin dalam SVM digunakan ketika:",
                options: [
                    "Jumlah support vector terlalu sedikit",
                    "Dimensi data sangat tinggi",
                    "Kedua kelas data tidak selalu terpisah secara sempurna oleh hyperplane",
                    "Margin yang dihasilkan terlalu lebar"
                ],
                correct: 2,
                topic: "SVM"
            },
            {
                question: "Salah satu kelemahan Decision Tree adalah tumpang tindih yang terjadi terutama ketika sangat banyak kelas dan kriteria yang digunakan. Hal ini dapat menyebabkan:",
                options: [
                    "Akurasi yang lebih tinggi",
                    "Waktu keputusan yang lebih cepat",
                    "Waktu keputusan yang lebih lama dan memori yang dibutuhkan lebih banyak",
                    "Model yang lebih sederhana"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Jika nilai Impurity Parent dengan Gini Index adalah 0.47, dan setelah di-split berdasarkan atribut 'Assets', Information Gain yang diperoleh adalah 0.2825. Ini berarti atribut 'Assets':",
                options: [
                    "Tidak baik untuk melakukan splitting",
                    "Meningkatkan impurity",
                    "Memberikan pengurangan impurity yang signifikan",
                    "Membuat node menjadi lebih heterogen"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Pada Iterasi ke-2 dalam pembangunan Decision Tree, tabel parent hanya mengambil data di mana atribut 'Assets' bernilai 'Medium'. Ini dilakukan karena:",
                options: [
                    "Atribut 'Assets' dengan nilai 'Low' dan 'High' sudah menghasilkan node murni (leaf node)",
                    "Atribut 'Savings' lebih penting dari 'Assets'",
                    "Atribut 'Income' memiliki Information Gain tertinggi",
                    "Data dengan 'Assets' bernilai 'Medium' paling banyak jumlahnya"
                ],
                correct: 0,
                topic: "Decision Tree"
            },
            {
                question: "Pengukuran numerik tentang seberapa berbeda 2 data objek, yang nilainya akan makin tinggi untuk 2 objek yang berbeda, disebut:",
                options: [
                    "Similarity",
                    "Correlation",
                    "Dissimilarity",
                    "Covariance"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Jika dua objek data identik, maka nilai Euclidean Distance antara keduanya adalah:",
                options: [
                    "1",
                    "0",
                    "-1",
                    "Tidak terdefinisi"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Minkowski Distance dengan parameter r = ∞ dikenal juga sebagai:",
                options: [
                    "Manhattan Distance",
                    "Euclidean Distance",
                    "Chebyshev Distance",
                    "Hamming Distance"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Dalam perhitungan Cosine Similarity, jika hasil dot product antara dua vektor A dan B adalah 0, maka kedua vektor tersebut:",
                options: [
                    "Identik",
                    "Berlawanan arah",
                    "Ortogonal (tegak lurus, menunjukkan tidak ada kesamaan arah)",
                    "Memiliki panjang yang sama"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Diberikan dua objek biner X=(1,0,1,0) dan Y=(1,1,0,0). Nilai M10 (atribut X=1, Y=0) adalah:",
                options: [
                    "0",
                    "1",
                    "2",
                    "3"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Jika Jaccard Coefficient antara dua set item adalah 1, ini berarti:",
                options: [
                    "Kedua set tidak memiliki item yang sama",
                    "Kedua set memiliki beberapa item yang sama",
                    "Kedua set identik (memiliki semua item yang sama dan tidak ada item lain)",
                    "Salah satu set adalah subset dari yang lain"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Proses mengubah data mentah menjadi format yang sesuai untuk analisis, yang meliputi seleksi fitur dan reduksi dimensionalitas, adalah bagian dari:",
                options: [
                    "Data Mining Engine",
                    "Pattern Evaluation",
                    "Data Preparation / Preprocessing",
                    "Assimilation of Knowledge"
                ],
                correct: 2,
                topic: "KDD Process"
            },
            {
                question: "Tahap dalam KDD yang paling banyak mengonsumsi resources (manusia, biaya, waktu) dan biasanya mencapai 60% dari keseluruhan proyek adalah:",
                options: [
                    "Business Objective Determination",
                    "Data Mining",
                    "Data Preparation",
                    "Assimilation of Knowledge"
                ],
                correct: 2,
                topic: "KDD Process"
            },
            {
                question: "Kegiatan untuk membuang data yang tidak konsisten dalam arsitektur sistem Data Mining disebut:",
                options: [
                    "Data Integration",
                    "Filtering",
                    "Pattern Evaluation",
                    "Data Cleaning"
                ],
                correct: 3,
                topic: "Arsitektur Data Mining"
            },
            {
                question: "Rumus untuk menghitung Entropy sebagai ukuran impurity adalah:",
                options: [
                    "$$Entropy = 1 - \\sum p_j^2$$",
                    "$$Entropy = -\\sum_{j} p_j \\log_2 p_j$$",
                    "$$Entropy = 1 - \\max\\{p_j\\}$$",
                    "$$Entropy = \\sum p_j \\log_2 p_j$$"
                ],
                correct: 1,
                hasEquation: true,
                topic: "Decision Tree"
            },
            {
                question: "Rumus untuk menghitung Classification Error sebagai ukuran impurity adalah:",
                options: [
                    "$$Classification Error = -\\sum p_j \\log_2 p_j$$",
                    "$$Classification Error = 1 - \\sum p_j^2$$",
                    "$$Classification Error = 1 - \\max_{j}\\{p_j\\}$$",
                    "$$Classification Error = \\min_{j}\\{p_j\\}$$"
                ],
                correct: 2,
                hasEquation: true,
                topic: "Decision Tree"
            },
            {
                question: "Untuk atribut Nominal dalam pengukuran dissimilarity, jika x = y maka d = 0, dan jika x ≠ y maka d =:",
                options: [
                    "0",
                    "1",
                    "|x-y|",
                    "∞"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Untuk atribut Ordinal dengan nilai yang dipetakan ke integer 0 sampai n-1, dissimilarity d antara dua nilai x dan y didefinisikan sebagai:",
                options: [
                    "$$d = |x-y|$$",
                    "$$d = \\frac{|x-y|}{(n-1)}$$",
                    "$$d = 1 - \\frac{|x-y|}{(n-1)}$$",
                    "$$d = (x-y)^2$$"
                ],
                correct: 1,
                hasEquation: true,
                topic: "Similarity Measures"
            },
            {
                question: "Jika similarity antara dua objek adalah s, maka dissimilarity d dapat dihitung sebagai:",
                options: [
                    "d = s",
                    "d = 1 + s",
                    "d = 1 - s",
                    "d = 1/s"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Rumus Cosine Similarity antara dua vektor A dan B adalah:",
                options: [
                    "$$\\frac{||A - B||}{||A|| + ||B||}$$",
                    "$$\\frac{A \\cdot B}{||A|| \\cdot ||B||}$$",
                    "$$1 - \\frac{A \\cdot B}{||A|| \\cdot ||B||}$$",
                    "$$\\sum (A_i - B_i)$$"
                ],
                correct: 1,
                hasEquation: true,
                topic: "Similarity Measures"
            },
            {
                question: "Proses pembangunan model klasifikasi yang melibatkan Training Set untuk membuat model disebut:",
                options: [
                    "Deduction",
                    "Induction",
                    "Application",
                    "Evaluation"
                ],
                correct: 1,
                topic: "Classification"
            },
            {
                question: "Contoh dari model Data Mining Deskriptif adalah:",
                options: [
                    "Decision Tree dan Neural Network",
                    "Clustering dan Association Rule",
                    "Regression dan Forecasting",
                    "Classification dan Time Series Analysis"
                ],
                correct: 1,
                topic: "Model Data Mining"
            },
            {
                question: "Model Data Mining yang menghasilkan sejumlah rule yang menjelaskan sejumlah data yang berhubungan kuat satu dengan yang lainnya, seperti 'IF A THEN B', adalah:",
                options: [
                    "Sequence Discovery",
                    "Association Rule",
                    "Summarization",
                    "Time Series Analysis"
                ],
                correct: 1,
                topic: "Model Data Mining"
            },
            {
                question: "Komponen dalam arsitektur sistem Data Mining yang menyimpan pengetahuan atau pola yang telah ditemukan adalah:",
                options: [
                    "Database",
                    "Data Warehouse",
                    "Data Mining Engine",
                    "Knowledge-base"
                ],
                correct: 3,
                topic: "Arsitektur Data Mining"
            },
            {
                question: "Jika sebuah perusahaan ingin menganalisis kenaikan atau penurunan suatu produk dalam tiga bulan ke depan berdasarkan data historis, model Data Mining yang paling sesuai adalah:",
                options: [
                    "Clustering",
                    "Association Rule",
                    "Forecasting",
                    "Summarization"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                question: "Teknik yang digunakan untuk memprediksi nilai yang berkelanjutan (numerik), bukan label kelas kategorikal, adalah:",
                options: [
                    "Classification",
                    "Clustering",
                    "Regression",
                    "Association Rule"
                ],
                correct: 2,
                topic: "Model Data Mining"
            },
            {
                                question: "Dalam Decision Tree untuk klasifikasi hewan mamalia, jika vertebrata berdarah dingin (cold-blooded), maka leaf node yang terbentuk adalah:",
                options: [
                    "Mammals",
                    "Birds",
                    "Non-mammals",
                    "Reptiles"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Rumus untuk menghitung Information Gain menggunakan Gini Index adalah:",
                options: [
                    "$$Gain(Parent, Atribut) = Gini_{Parent} - \\sum_{v \\in Atribut} \\frac{|S_v|}{|S|} Gini_{S_v}$$",
                    "$$Gain(Parent, Atribut) = \\sum_{v \\in Atribut} \\frac{|S_v|}{|S|} Gini_{S_v} - Gini_{Parent}$$",
                    "$$Gain(Parent, Atribut) = Gini_{Parent} + \\sum_{v \\in Atribut} \\frac{|S_v|}{|S|} Gini_{S_v}$$",
                    "$$Gain(Parent, Atribut) = 1 - Gini_{Parent}$$"
                ],
                correct: 0,
                hasEquation: true,
                topic: "Decision Tree"
            },
            {
                question: "Jika sebuah node memiliki distribusi kelas: Kelas A = 3, Kelas B = 5 (Total 8 data). Maka probabilitas untuk Kelas A dan Kelas B adalah:",
                options: [
                    "P(A) = 3/5, P(B) = 5/3",
                    "P(A) = 0.3, P(B) = 0.5",
                    "P(A) = 3/8 = 0.375, P(B) = 5/8 = 0.625",
                    "P(A) = 8/3, P(B) = 8/5"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Menggunakan probabilitas P(A) = 0.375 dan P(B) = 0.625, nilai Gini Index untuk node tersebut adalah:",
                options: [
                    "1 - (0.375² - 0.625²)",
                    "1 - (0.375 + 0.625)",
                    "1 - (0.375² + 0.625²) = 1 - (0.140625 + 0.390625) = 0.46875",
                    "0.375 × 0.625"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Jika setelah iterasi pertama dalam pembangunan Decision Tree, atribut 'Assets' memiliki Information Gain tertinggi, maka 'Assets' akan menjadi:",
                options: [
                    "Leaf Node",
                    "Internal Node pada level kedua",
                    "Root Node",
                    "Atribut yang diabaikan"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Dalam Rule-Based Classifier, bagian 'Class=Birds' dari aturan 'IF (Blood Type=Warm) AND (Lay Eggs=Yes) THEN Class=Birds' adalah:",
                options: [
                    "Antecedent",
                    "Kondisi",
                    "Konjungsi atribut",
                    "Rule Consequent (RHS)"
                ],
                correct: 3,
                topic: "Classification"
            },
            {
                question: "Keputusan klasifikasi akhir dalam Naive Bayes untuk instance X adalah kelas Ci yang memiliki nilai:",
                options: [
                    "P(Ci|X) minimum",
                    "P(X|Ci) × P(Ci) maksimum",
                    "P(X|Ci) maksimum",
                    "P(Ci) maksimum"
                ],
                correct: 1,
                topic: "Naive Bayes"
            },
            {
                question: "Prinsip yang mendasari SVM dengan tujuan menemukan hyperplane terbaik yang memisahkan dua buah kelas pada input space adalah:",
                options: [
                    "Maximum Likelihood Estimation (MLE)",
                    "Structural Risk Minimization (SRM)",
                    "Minimum Description Length (MDL)",
                    "Empirical Risk Minimization (ERM)"
                ],
                correct: 1,
                topic: "SVM"
            },
            {
                question: "Rumus Manhattan Distance (City Block Distance) antara dua titik x dan y dengan n dimensi adalah:",
                options: [
                    "$$d(x,y) = \\sqrt{\\sum_{k=1}^{n} (x_k - y_k)^2}$$",
                    "$$d(x,y) = \\sum_{k=1}^{n} |x_k - y_k|$$",
                    "$$d(x,y) = \\max_k |x_k - y_k|$$",
                    "$$d(x,y) = \\min_k |x_k - y_k|$$"
                ],
                correct: 1,
                hasEquation: true,
                topic: "Similarity Measures"
            },
            {
                question: "Minkowski Distance adalah generalisasi dari Euclidean Distance. Jika parameter r = 2, maka jarak tersebut setara dengan:",
                options: [
                    "Manhattan Distance",
                    "Chebyshev Distance",
                    "Hamming Distance",
                    "Euclidean Distance"
                ],
                correct: 3,
                topic: "Similarity Measures"
            },
            {
                question: "Untuk atribut biner, Simple Matching Coefficient (SMC) dihitung dengan rumus (p=jumlah 1-1, q=jumlah 1-0, r=jumlah 0-1, s=jumlah 0-0):",
                options: [
                    "SMC = p/(p+q+r)",
                    "SMC = (p+s)/(p+q+r+s)",
                    "SMC = p/(p+q+r+s)",
                    "SMC = s/(p+q+r+s)"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Untuk atribut biner, Jaccard Coefficient dihitung dengan rumus:",
                options: [
                    "Jaccard = (p+s)/(p+q+r+s)",
                    "Jaccard = p/(p+q+r)",
                    "Jaccard = p/(p+s)",
                    "Jaccard = (q+r)/(p+q+r+s)"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Perbedaan utama antara SMC dan Jaccard Coefficient dalam menangani atribut biner adalah:",
                options: [
                    "SMC mengabaikan pasangan (0,0) sementara Jaccard memperhitungkannya",
                    "Jaccard mengabaikan pasangan (0,0) sementara SMC memperhitungkannya",
                    "SMC hanya untuk data numerik, Jaccard untuk data biner",
                    "Tidak ada perbedaan signifikan antara keduanya"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Jika dua objek data memiliki jarak Euclidean yang kecil, maka kesamaan (similarity) antara keduanya cenderung:",
                options: [
                    "Kecil",
                    "Besar",
                    "Tidak dapat ditentukan",
                    "Nol"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Jika sebuah node memiliki distribusi kelas: Kelas X = 2, Kelas Y = 6 (Total 8). Nilai Entropy untuk node ini adalah:",
                options: [
                    "$$-(0.25 \\log_2 0.25 + 0.75 \\log_2 0.75)$$",
                    "$$-(0.25 \\log_2 0.75 + 0.75 \\log_2 0.25)$$",
                    "$$1 - (0.25^2 + 0.75^2)$$",
                    "$$0.25 \\times 0.75$$"
                ],
                correct: 0,
                hasEquation: true,
                topic: "Decision Tree"
            },
            {
                question: "Menggunakan data P(X) = 0.25 dan P(Y) = 0.75, nilai Classification Error untuk node tersebut adalah:",
                options: [
                    "1 - 0.25 = 0.75",
                    "1 - 0.75 = 0.25",
                    "1 - (0.25 + 0.75) = 0",
                    "0.75"
                ],
                correct: 1,
                topic: "Decision Tree"
            },
            {
                question: "Proses memecah data menjadi himpunan bagian yang lebih kecil dalam pembangunan Decision Tree disebut:",
                options: [
                    "Pruning",
                    "Merging",
                    "Splitting",
                    "Aggregating"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Salah satu kelemahan Decision Tree adalah:",
                options: [
                    "Sulit mengintegrasikan dengan sistem basis data",
                    "Tidak mampu menangani data kategorikal",
                    "Kesulitan dalam merancang pohon keputusan yang optimal dan rentan terhadap tumpang tindih",
                    "Akurasi yang selalu rendah dibandingkan metode lain"
                ],
                correct: 2,
                topic: "Decision Tree"
            },
            {
                question: "Untuk atribut Interval atau Ratio, dissimilarity d antara dua nilai x dan y umumnya didefinisikan sebagai:",
                options: [
                    "d = 1 jika x ≠ y",
                    "d = |x-y|/(n-1)",
                    "d = |x-y|",
                    "d = 1 - |x-y|"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Jika vektor A = [5, 1, 2] dan B = [2, 0, 3], maka dot product A·B adalah:",
                options: [
                    "(5×1×2) + (2×0×3)",
                    "(5+2) + (1+0) + (2+3)",
                    "(5×2) + (1×0) + (2×3) = 10 + 0 + 6 = 16",
                    "√(5²+1²+2²) × √(2²+0²+3²)"
                ],
                correct: 2,
                topic: "Similarity Measures"
            },
            {
                question: "Panjang vektor (magnitude) ||A|| untuk A = [5, 1, 2] adalah:",
                options: [
                    "5+1+2 = 8",
                    "√(5²+1²+2²) = √30 ≈ 5.477",
                    "5×1×2 = 10",
                    "(5²+1²+2²) = 30"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Pengukuran jarak yang menjadi prinsip dasar untuk algoritma k-Nearest Neighbors (KNN) adalah:",
                options: [
                    "Hanya Similarity",
                    "Distance (Dissimilarity)",
                    "Hanya Correlation",
                    "Covariance"
                ],
                correct: 1,
                topic: "Similarity Measures"
            },
            {
                question: "Menurut Thomas H. Davenport dan Laurence Prusak, pengetahuan (knowledge) merupakan gabungan dari, kecuali:",
                options: [
                    "Pengalaman dan nilai",
                    "Informasi kontekstual",
                    "Pandangan pakar dan framework",
                    "Data mentah yang belum diproses"
                ],
                correct: 3,
                topic: "Konsep Data Mining"
            },
            {
                question: "Dalam klasifikasi, input berupa himpunan atribut (x) dipetakan ke output berupa:",
                options: [
                    "Sekumpulan aturan asosiasi",
                    "Label kelas (atribut target) (y)",
                    "Sebuah nilai numerik kontinu",
                    "Kelompok (cluster) data"
                ],
                correct: 1,
                topic: "Classification"
            },
            {
                question: "Pada pohon keputusan, node yang dinyatakan sebagai label kelas adalah:",
                options: [
                    "Root Node",
                    "Internal Node",
                    "Non-terminal Node",
                    "Leaf Node (Terminal Node)"
                ],
                correct: 3,
                topic: "Decision Tree"
            }
        ];
        // Global variables
        let questions = [...originalQuestions];
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let flaggedQuestions = new Set();
        let startTime = Date.now();
        let timerInterval;
        let timeLimit = 90 * 60; // 90 minutes in seconds

        // Toggle settings
        function toggleSetting(setting) {
            settings[setting] = !settings[setting];
            const toggle = document.getElementById(setting + 'Toggle');
            toggle.classList.toggle('active');
            
            if (setting === 'darkMode') {
                document.body.classList.toggle('dark-mode');
            }
        }

        // Shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Start exam
        function startExam() {
            // Apply randomization if enabled
            if (settings.randomize) {
                questions = shuffleArray([...originalQuestions]);
            } else {
                questions = [...originalQuestions];
            }
            
            // Reset variables
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            flaggedQuestions.clear();
            startTime = Date.now();
            timeLimit = 90 * 60;
            
            document.querySelector('.start-screen').classList.remove('active');
            document.querySelector('.question-screen').classList.add('active');
            
            // Initialize navigator
            if (settings.showNavigator) {
                initializeNavigator();
                document.getElementById('questionNavigator').classList.add('show');
            }
            
            startTimer();
            showQuestion();
        }

        // Initialize question navigator
        function initializeNavigator() {
            const navGrid = document.getElementById('navGrid');
            navGrid.innerHTML = '';
            
            for (let i = 0; i < questions.length; i++) {
                const navItem = document.createElement('div');
                navItem.className = 'nav-item';
                navItem.textContent = i + 1;
                navItem.onclick = () => jumpToQuestion(i);
                navGrid.appendChild(navItem);
            }
        }

        // Jump to specific question
        function jumpToQuestion(index) {
            currentQuestion = index;
            showQuestion();
        }

        // Update navigator
        function updateNavigator() {
            if (!settings.showNavigator) return;
            
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, index) => {
                item.classList.remove('current', 'answered', 'flagged');
                
                if (index === currentQuestion) {
                    item.classList.add('current');
                }
                
                if (userAnswers[index] !== null) {
                    item.classList.add('answered');
                }
                
                if (flaggedQuestions.has(index)) {
                    item.classList.add('flagged');
                }
            });
        }

        // Timer function
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLimit--;
                const minutes = Math.floor(timeLimit / 60);
                const seconds = timeLimit % 60;
                const timerElement = document.getElementById('timer');
                timerElement.textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Warning when 5 minutes left
                if (timeLimit <= 300) {
                    timerElement.classList.add('warning');
                }
                
                if (timeLimit <= 0) {
                    clearInterval(timerInterval);
                    finishExam();
                }
            }, 1000);
        }

        // Show question - PERBAIKAN DI SINI
        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = 
                `Soal ${currentQuestion + 1} dari ${questions.length}`;
            document.getElementById('questionText').innerHTML = question.question;
            
            const optionsList = document.getElementById('optionsList');
            optionsList.innerHTML = '';
            
            // Get options (randomize if enabled)
            let options = question.options.map((option, index) => ({ text: option, originalIndex: index }));
            if (settings.randomizeOptions) {
                options = shuffleArray(options);
            }
            
            options.forEach((option, displayIndex) => {
                const li = document.createElement('li');
                li.className = 'option';
                
                // Set data attribute untuk tracking
                li.setAttribute('data-original-index', option.originalIndex);
                
                // Check if this option was selected
                if (userAnswers[currentQuestion] === option.originalIndex) {
                    li.classList.add('selected');
                }
                
                li.innerHTML = `
                    <span class="option-label">${String.fromCharCode(65 + displayIndex)}.</span>
                    ${option.text}
                `;
                
                // Event listener
                li.addEventListener('click', function() {
                    selectOption(option.originalIndex);
                });
                
                optionsList.appendChild(li);
            });
            
            // Update progress bar
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = 
                currentQuestion === questions.length - 1 ? 'Selesai' : 'Selanjutnya →';
            
            // Update flag button
            const flagBtn = document.getElementById('flagBtn');
            if (flaggedQuestions.has(currentQuestion)) {
                flagBtn.classList.add('flagged');
                flagBtn.innerHTML = '🚩 Hapus Tanda';
            } else {
                flagBtn.classList.remove('flagged');
                flagBtn.innerHTML = '🚩 Tandai Soal';
            }
            
            // Update navigator
            updateNavigator();
            
            // Re-render MathJax if question has equations
            if (question.hasEquation) {
                setTimeout(() => {
                            // Render untuk question text
        MathJax.typesetPromise([document.getElementById('questionText')]).catch((e) => console.error(e));
        
        // Render untuk semua options juga
        MathJax.typesetPromise([document.getElementById('optionsList')]).catch((e) => console.error(e));
                }, 100);
            }
        }

        // Select option - PERBAIKAN DI SINI
        function selectOption(index) {
            // Simpan jawaban
            userAnswers[currentQuestion] = index;
            
            // Hapus semua class selected
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Tambahkan class selected ke option yang diklik
            const selectedOption = document.querySelector(`.option[data-original-index="${index}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            // Update navigator
            updateNavigator();
            
            // Save progress
            saveProgress();
        }

        // Toggle flag
        function toggleFlag() {
            if (flaggedQuestions.has(currentQuestion)) {
                flaggedQuestions.delete(currentQuestion);
            } else {
                                flaggedQuestions.add(currentQuestion);
            }
            showQuestion();
            saveProgress();
        }

        // Navigation
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showSubmitConfirmation();
            }
        }

        // Show submit confirmation
        function showSubmitConfirmation() {
            const unanswered = userAnswers.filter(answer => answer === null).length;
            const modal = document.getElementById('submitModal');
            const warning = document.getElementById('unansweredWarning');
            
            if (unanswered > 0) {
                warning.textContent = `Anda masih memiliki ${unanswered} soal yang belum dijawab.`;
                warning.style.color = '#dc3545';
            } else {
                warning.textContent = 'Semua soal telah dijawab.';
                warning.style.color = '#28a745';
            }
            
            modal.classList.add('show');
        }

        // Close modal
        function closeModal() {
            document.getElementById('submitModal').classList.remove('show');
        }

        // Finish exam
        function finishExam() {
            clearInterval(timerInterval);
            closeModal();
            
            // Calculate results
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;
            
            questions.forEach((question, index) => {
                if (userAnswers[index] === null) {
                    unansweredCount++;
                } else if (userAnswers[index] === question.correct) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });
            
            const score = Math.round((correctCount / questions.length) * 100);
            const timeSpent = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;
            
            // Show results
            document.querySelector('.question-screen').classList.remove('active');
            document.querySelector('.result-screen').classList.add('active');
            
            document.getElementById('scoreText').textContent = score + '%';
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('incorrectCount').textContent = incorrectCount;
            document.getElementById('unansweredCount').textContent = unansweredCount;
            document.getElementById('timeSpent').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Grade
            let grade, gradeClass, gradeMessage;
            if (score >= 85) {
                grade = 'A';
                gradeClass = 'excellent';
                gradeMessage = 'Luar biasa! Anda menguasai materi dengan sangat baik!';
            } else if (score >= 70) {
                grade = 'B';
                gradeClass = 'good';
                gradeMessage = 'Bagus! Anda memiliki pemahaman yang baik tentang materi.';
            } else if (score >= 60) {
                grade = 'C';
                gradeClass = 'fair';
                gradeMessage = 'Cukup baik! Anda lulus, tetapi masih perlu meningkatkan pemahaman.';
            } else {
                grade = 'D';
                gradeClass = 'poor';
                gradeMessage = 'Anda perlu belajar lebih giat lagi. Jangan menyerah!';
            }
            
            const gradeElement = document.getElementById('gradeText');
            gradeElement.textContent = `Grade: ${grade}`;
            gradeElement.className = `grade ${gradeClass}`;
            document.getElementById('gradeMessage').textContent = gradeMessage;
            
            // Show topic performance
            showTopicPerformance();
            
            // Show answer review
            showAnswerReview();
            
            // Clear saved progress
            localStorage.removeItem('examProgress');
            
            // Confetti for high scores
            if (score >= 85) {
                setTimeout(createConfetti, 500);
            }
        }

        // Show topic performance analysis
        function showTopicPerformance() {
            const topicStats = {};
            
            // Calculate stats per topic
            questions.forEach((question, index) => {
                const topic = question.topic;
                if (!topicStats[topic]) {
                    topicStats[topic] = { correct: 0, total: 0 };
                }
                
                topicStats[topic].total++;
                if (userAnswers[index] === question.correct) {
                    topicStats[topic].correct++;
                }
            });
            
            // Display topic performance
            const container = document.getElementById('topicPerformance');
            container.innerHTML = '';
            
            Object.entries(topicStats).forEach(([topic, stats]) => {
                const percentage = Math.round((stats.correct / stats.total) * 100);
                const chartBar = document.createElement('div');
                chartBar.className = 'chart-bar';
                chartBar.innerHTML = `
                    <div class="chart-label">${topic}</div>
                    <div class="chart-progress">
                        <div class="chart-fill" style="width: 0%">
                            ${percentage}%
                        </div>
                    </div>
                `;
                container.appendChild(chartBar);
                
                // Animate chart
                setTimeout(() => {
                    chartBar.querySelector('.chart-fill').style.width = percentage + '%';
                }, 100);
            });
        }

        // Show answer review
        function showAnswerReview() {
            const reviewContainer = document.getElementById('answerReview');
            reviewContainer.innerHTML = '<h3>📝 Review Jawaban</h3>';
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const isUnanswered = userAnswer === null;
                
                const reviewItem = document.createElement('div');
                reviewItem.className = `review-item ${isCorrect ? 'correct' : 'incorrect'}`;
                
                let statusText, statusClass;
                if (isUnanswered) {
                    statusText = '⚪ Tidak Dijawab';
                    statusClass = 'incorrect';
                } else if (isCorrect) {
                    statusText = '✓ Benar';
                    statusClass = 'correct';
                } else {
                    statusText = '✗ Salah';
                    statusClass = 'incorrect';
                }
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <span>Soal ${index + 1} ${flaggedQuestions.has(index) ? '🚩' : ''}</span>
                        <span class="review-status ${statusClass}">
                            ${statusText}
                        </span>
                    </div>
                    <div class="review-question">${question.question}</div>
                    ${!isCorrect ? `
                        <div class="review-answer your-answer">
                            Jawaban Anda: ${isUnanswered ? 'Tidak dijawab' : 
                                String.fromCharCode(65 + userAnswer) + '. ' + 
                                question.options[userAnswer]}
                        </div>
                    ` : ''}
                    <div class="review-answer correct-answer">
                        Jawaban Benar: ${String.fromCharCode(65 + question.correct)}. 
                        ${question.options[question.correct]}
                    </div>
                    <div style="margin-top: 10px; color: #666; font-size: 0.9em;">
                        Topik: ${question.topic}
                    </div>
                `;
                
                reviewContainer.appendChild(reviewItem);
                
                // Re-render MathJax for equations in review
                if (question.hasEquation) {
                    setTimeout(() => {
                        MathJax.typesetPromise([reviewItem]).catch((e) => console.error(e));
                    }, 100);
                }
            });
        }

        // Retake exam
        function retakeExam() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            flaggedQuestions.clear();
            startTime = Date.now();
            timeLimit = 90 * 60;
            
            document.querySelector('.result-screen').classList.remove('active');
            document.querySelector('.start-screen').classList.add('active');
        }

        // Download result
        function downloadResult() {
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;
            
            questions.forEach((question, index) => {
                if (userAnswers[index] === null) {
                    unansweredCount++;
                } else if (userAnswers[index] === question.correct) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });
            
            const score = Math.round((correctCount / questions.length) * 100);
            const timeSpent = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;
            
            let resultText = `HASIL UJIAN TENGAH SEMESTER - DATA MINING\n`;
            resultText += `${'='.repeat(50)}\n\n`;
            resultText += `Tanggal: ${new Date().toLocaleDateString('id-ID')}\n`;
            resultText += `Waktu: ${new Date().toLocaleTimeString('id-ID')}\n\n`;
            resultText += `RINGKASAN HASIL\n`;
            resultText += `${'-'.repeat(30)}\n`;
            resultText += `Total Soal: ${questions.length}\n`;
            resultText += `Jawaban Benar: ${correctCount}\n`;
            resultText += `Jawaban Salah: ${incorrectCount}\n`;
            resultText += `Tidak Dijawab: ${unansweredCount}\n`;
            resultText += `Skor: ${score}%\n`;
            resultText += `Grade: ${score >= 85 ? 'A' : score >= 70 ? 'B' : score >= 60 ? 'C' : 'D'}\n`;
            resultText += `Waktu Pengerjaan: ${minutes}:${seconds.toString().padStart(2, '0')}\n\n`;
            
            // Topic performance
            resultText += `PERFORMA PER TOPIK\n`;
            resultText += `${'='.repeat(50)}\n`;
            
            const topicStats = {};
            questions.forEach((question, index) => {
                const topic = question.topic;
                if (!topicStats[topic]) {
                    topicStats[topic] = { correct: 0, total: 0 };
                }
                topicStats[topic].total++;
                if (userAnswers[index] === question.correct) {
                    topicStats[topic].correct++;
                }
            });
            
            Object.entries(topicStats).forEach(([topic, stats]) => {
                const percentage = Math.round((stats.correct / stats.total) * 100);
                resultText += `${topic}: ${stats.correct}/${stats.total} (${percentage}%)\n`;
            });
            
            resultText += `\nDETAIL JAWABAN\n`;
            resultText += `${'='.repeat(50)}\n\n`;
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const isUnanswered = userAnswer === null;
                
                // Remove HTML tags and LaTeX from question text for plain text export
                let cleanQuestion = question.question.replace(/\$\$[^$]+\$\$/g, '[Persamaan Matematika]');
                cleanQuestion = cleanQuestion.replace(/\$[^$]+\$/g, '[Rumus]');
                
                resultText += `Soal ${index + 1}: ${isUnanswered ? '⚪ TIDAK DIJAWAB' : isCorrect ? '✓ BENAR' : '✗ SALAH'}`;
                if (flaggedQuestions.has(index)) resultText += ' 🚩';
                resultText += `\n`;
                resultText += `Topik: ${question.topic}\n`;
                resultText += `Pertanyaan: ${cleanQuestion}\n`;
                
                if (!isCorrect) {
                    resultText += `Jawaban Anda: ${isUnanswered ? 'Tidak dijawab' : 
                        String.fromCharCode(65 + userAnswer) + '. ' + 
                        question.options[userAnswer]}\n`;
                }
                
                resultText += `Jawaban Benar: ${String.fromCharCode(65 + question.correct)}. ${question.options[question.correct]}\n`;
                resultText += `${'-'.repeat(50)}\n\n`;
            });
            
            // Create and download file
            const blob = new Blob([resultText], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Hasil_UTS_DataMining_${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Print result
        function printResult() {
            window.print();
        }

        // Create confetti effect
        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#4facfe'];
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.opacity = Math.random();
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.transition = `all ${2 + Math.random() * 3}s linear`;
                confetti.style.pointerEvents = 'none';
                confetti.style.zIndex = '9999';
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.style.top = '100%';
                    confetti.style.transform = `rotate(${Math.random() * 720}deg)`;
                }, 10);
                
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (document.querySelector('.question-screen').classList.contains('active')) {
                if (e.key === 'ArrowLeft' && currentQuestion > 0) {
                    previousQuestion();
                } else if (e.key === 'ArrowRight' && currentQuestion < questions.length - 1) {
                    nextQuestion();
                } else if (e.key >= '1' && e.key <= '4') {
                    const index = parseInt(e.key) - 1;
                                        // Find the option with this display index
                    const options = document.querySelectorAll('.option');
                    if (options[index]) {
                        const originalIndex = parseInt(options[index].getAttribute('data-original-index'));
                        selectOption(originalIndex);
                    }
                } else if (e.key.toLowerCase() >= 'a' && e.key.toLowerCase() <= 'd') {
                    const index = e.key.toLowerCase().charCodeAt(0) - 97;
                    const options = document.querySelectorAll('.option');
                    if (options[index]) {
                        const originalIndex = parseInt(options[index].getAttribute('data-original-index'));
                        selectOption(originalIndex);
                    }
                } else if (e.key === 'f' || e.key === 'F') {
                    toggleFlag();
                }
            }
        });

        // Prevent accidental page refresh
        window.addEventListener('beforeunload', (e) => {
            if (document.querySelector('.question-screen').classList.contains('active')) {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // Auto-save progress to localStorage
        function saveProgress() {
            const progress = {
                currentQuestion,
                userAnswers,
                flaggedQuestions: Array.from(flaggedQuestions),
                timeLimit,
                startTime,
                settings,
                questionOrder: questions.map(q => originalQuestions.indexOf(q))
            };
            localStorage.setItem('examProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('examProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                if (confirm('Anda memiliki ujian yang belum selesai. Lanjutkan?')) {
                    currentQuestion = progress.currentQuestion;
                    userAnswers = progress.userAnswers;
                    flaggedQuestions = new Set(progress.flaggedQuestions);
                    timeLimit = progress.timeLimit;
                    startTime = progress.startTime;
                    
                    // Restore settings
                    Object.assign(settings, progress.settings);
                    
                    // Restore question order
                    if (progress.questionOrder) {
                        questions = progress.questionOrder.map(index => originalQuestions[index]);
                    }
                    
                    // Apply settings
                    if (settings.darkMode) {
                        document.body.classList.add('dark-mode');
                        document.getElementById('darkModeToggle').classList.add('active');
                    }
                    
                    document.querySelector('.start-screen').classList.remove('active');
                    document.querySelector('.question-screen').classList.add('active');
                    
                    if (settings.showNavigator) {
                        initializeNavigator();
                        document.getElementById('questionNavigator').classList.add('show');
                    }
                    
                    startTimer();
                    showQuestion();
                } else {
                    localStorage.removeItem('examProgress');
                }
            }
        }

        // Load progress on page load
        window.addEventListener('load', loadProgress);

        // Mobile touch support
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (document.querySelector('.question-screen').classList.contains('active')) {
                if (touchEndX < touchStartX - 50 && currentQuestion < questions.length - 1) {
                    nextQuestion();
                }
                if (touchEndX > touchStartX + 50 && currentQuestion > 0) {
                    previousQuestion();
                }
            }
        }

        // Console Easter egg
        console.log('%c🎓 UTS Data Mining System v2.0', 'font-size: 24px; font-weight: bold; color: #667eea;');
        console.log('%cDeveloped with ❤️ for students', 'font-size: 14px; color: #764ba2;');
        console.log('%cFeatures: Question randomization, Dark mode, Progress tracking, Topic analysis', 'font-size: 12px; color: #666;');
        console.log('%cGood luck with your exam! 🍀', 'font-size: 14px; color: #28a745;');
        
        // Add custom styles for MathJax
        const style = document.createElement('style');
        style.textContent = `
            .MathJax {
                font-size: 1.1em !important;
            }
            
            .option .MathJax {
                font-size: 1em !important;
            }
            
            mjx-container {
                margin: 0 5px !important;
            }
            
            @media print {
                body {
                    background: white;
                }
                
                .container {
                    box-shadow: none;
                    max-width: 100%;
                }
                
                .btn {
                    display: none;
                }
                
                .result-screen {
                    padding: 20px;
                }
                
                .score-circle {
                    box-shadow: none;
                    border: 3px solid #667eea;
                }
                
                .review-item {
                    page-break-inside: avoid;
                }
            }
        `;
        document.head.appendChild(style);

        // Add print styles
        const printStyle = document.createElement('style');
        printStyle.media = 'print';
        printStyle.textContent = `
            @page {
                margin: 1cm;
            }
            
            .header {
                background: none !important;
                color: #333 !important;
                border-bottom: 2px solid #667eea;
            }
            
            .score-text {
                color: #667eea !important;
            }
            
            .stat-card {
                border: 1px solid #ddd;
            }
            
            .chart-fill {
                background: #667eea !important;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        `;
        document.head.appendChild(printStyle);

        // Accessibility improvements
        document.addEventListener('DOMContentLoaded', () => {
            // Add ARIA labels
            document.querySelector('.progress-bar').setAttribute('role', 'progressbar');
            document.querySelector('.progress-bar').setAttribute('aria-label', 'Progress ujian');
            
            // Add keyboard focus indicators
            const focusableElements = document.querySelectorAll('button, .option, .nav-item');
            focusableElements.forEach(el => {
                el.setAttribute('tabindex', '0');
            });
        });

        // Performance optimization
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        // Debounced save progress
        const debouncedSaveProgress = debounce(saveProgress, 1000);

        // Add visibility change handler to pause timer when tab is not visible
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && timerInterval) {
                // Optional: You could pause the timer here
                console.log('Tab is hidden');
            } else {
                console.log('Tab is visible');
            }
        });

        // Add network status handler
        window.addEventListener('online', () => {
            console.log('Back online');
        });

        window.addEventListener('offline', () => {
            console.log('Gone offline - progress is saved locally');
        });

        // Initialize tooltips for better UX
        function initTooltips() {
            const tooltipElements = [
                { selector: '.flag-button', text: 'Tandai soal untuk review nanti' },
                { selector: '.nav-item', text: 'Klik untuk langsung ke soal' }
            ];
            
            tooltipElements.forEach(({ selector, text }) => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(el => {
                    el.setAttribute('title', text);
                });
            });
        }

        // Add smooth scroll behavior
        document.documentElement.style.scrollBehavior = 'smooth';

        // Export results to JSON (for advanced users)
        function exportResultsJSON() {
            const results = {
                examDate: new Date().toISOString(),
                score: Math.round((userAnswers.filter((ans, idx) => ans === questions[idx].correct).length / questions.length) * 100),
                timeSpent: Math.floor((Date.now() - startTime) / 1000),
                answers: questions.map((q, idx) => ({
                    questionNumber: idx + 1,
                    question: q.question,
                    userAnswer: userAnswers[idx],
                    correctAnswer: q.correct,
                    isCorrect: userAnswers[idx] === q.correct,
                    topic: q.topic,
                    flagged: flaggedQuestions.has(idx)
                })),
                topicPerformance: {}
            };
            
            // Calculate topic performance
            questions.forEach((q, idx) => {
                if (!results.topicPerformance[q.topic]) {
                    results.topicPerformance[q.topic] = { correct: 0, total: 0 };
                }
                results.topicPerformance[q.topic].total++;
                if (userAnswers[idx] === q.correct) {
                    results.topicPerformance[q.topic].correct++;
                }
            });
            
            return results;
        }

        // Add export JSON button (hidden by default, can be enabled via console)
        window.enableJSONExport = function() {
            const resultScreen = document.querySelector('.result-screen');
            const exportBtn = document.createElement('button');
            exportBtn.className = 'btn btn-secondary';
            exportBtn.textContent = 'Export JSON';
            exportBtn.onclick = () => {
                const results = exportResultsJSON();
                const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `exam_results_${new Date().getTime()}.json`;
                a.click();
                URL.revokeObjectURL(url);
            };
            resultScreen.querySelector('div[style*="text-align: center"]').appendChild(exportBtn);
        };

        // Analytics (if needed in future)
        window.examAnalytics = {
            getAverageTimePerQuestion: () => {
                const totalTime = Math.floor((Date.now() - startTime) / 1000);
                return Math.round(totalTime / questions.length);
            },
            getMostTimeSpentQuestion: () => {
                // This would require tracking time per question
                return 'Feature not implemented yet';
            },
            getAccuracyByTopic: () => {
                const results = exportResultsJSON();
                return results.topicPerformance;
            }
        };

        // Fix untuk memastikan tooltips diinisialisasi saat start exam
        const originalStartExam = startExam;
        startExam = function() {
            originalStartExam();
            setTimeout(initTooltips, 100);
        };
    </script>
</body>
</html>